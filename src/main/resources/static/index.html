<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
  <h2>Home</h2>
  <div><a href="http://localhost:9090/hello.html">hello.html</a></div>
  <div><a href="/hello.html">hello.html</a></div>
  <!-- static : root 가 됨 : url -->
  <!-- / : http://localhost:9090 : static 폴더 안 -->
  <!-- resources : html, css, favicon -->
  <div><a href="/hi">Greetings</a></div>
  <!-- uri : indicator -> 컨트롤러 주소 -->
  <!-- /hi 인 컨트롤러 주소를 찾아가라 -->
  <div><a href="/hi2">원영님 반갑습니다 </a></div>
  <div><a href="/hi3">반갑습니다(부트스트랩) </a></div>
  <div><a href="/hi4">반갑습니다(include 기술사용) </a></div>
  <div>&nbsp;</div>
  <div>&nbsp;</div>
  <div>&nbsp;</div>
  <div><a href="/articles/WriteForm">새 글쓰기</a></div>
  <!-- mustache 목적 : write.mustache, 여기선 입력받도록 하는 mustache 로 보내야함 -->
  <!-- 컨트롤러의 매핑 주소 : /articles/WriteForm, a tag : @GetMapping 으로 받음 -->
  <!-- ArticleController 로 이동 -->
  <div><a href="/articles/1">1번 글 조회</a></div>
  <div><a href="/articles/List">글 목록 조회</a></div>
  <div>&nbsp;</div>
  <div><a href="/RestExam">Rest Api Get</a></div>
  <div>
    <form action="/RestExam" method="GET">
      <input type="submit" value="GET">
    </form>
  </div>
  <div>
    <form action="/RestExam" method="POST">
      <input type="submit" value="POST">
    </form>
  </div>
  <div>
    <form action="/RestExam" method="DELETE">
      <!-- <input type="submit" value="DELETE"> -->
      <input type="submit" value="DELETE">
    </form>
  </div>
  <div>&nbsp;</div>
  <div><a href="/h2-console">db 확인</a></div>
  <div>&nbsp;</div>
  
  <script>
  
    // <form> tag 안의 <input type="submit" />
    //                 <input type="img" />
    // <button> tag
    // 모두 <form> tag 의 submit 이벤트를 발생시킨다
    // submit 이벤트 : form action 의 페이지로 이동
    // form name 속성을 가진 input 들의 value 를 서버로 가지고 간다
    const formEls = document.querySelectorAll('form');	// 3개를 찾아줌(GET, POST, DELETE)
    formEls.forEach( ( form ) => {		// 배열 → 반복문
    	form.onsubmit = function (e) {
    		// this : 현재 이벤트(submit) 발생된 객체
    		//      : 현재 submit 된 form tag
    		// onclick : button 에 일어난 이벤트, submit : form 에 일어난 이벤트
    		
    		e.preventDefault();		// 이벤트 취소시킨다, submit 이 서버로 안가게 방해함
    		//alert( this.method );
    		
    		//fetch('/RestExam')
    		fetch( this.action, {
    			method : this.method
    		} )
    		//.then( (response) => response.text() )	// response : 변수명 , 앞의 변수명과 뒤의 변수명 같아야함
    		.then( (resp) => resp.text() )
    		.then( text => alert(text) )
    		
    		alert( this.action );
    	}
    } )
  
  </script>
  
</body>
</html>